{% extends 'nhan_khau/nhankhau_base.html' %}
{% load form_tags %}
{% block content %}
<div class="container mt-4">
    <h4 class="fw-bold" style="color: #003366">{{ dan_cu.ho_ten }}</h4>

    <form method="POST" class="row g-3">
        {% csrf_token %}

        <div class="col-md-6">
            <label class="form-label">Họ tên</label>
            {{ form.ho_ten|add_class:"form-control" }}
            {% if form.ho_ten.errors %}
                <div class="text-danger">{{ form.ho_ten.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Ngày sinh</label>
            {{ form.ngay_sinh|add_class:"form-control" }}
            {% if form.ngay_sinh.errors %}
                <div class="text-danger">{{ form.ngay_sinh.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Giới tính</label>
            {{ form.gioi_tinh|add_class:"form-select" }}
            {% if form.gioi_tinh.errors %}
                <div class="text-danger">{{ form.gioi_tinh.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Mã căn cước</label>
            {{ form.ma_can_cuoc|add_class:"form-control" }}
            {% if form.ma_can_cuoc.errors %}
                <div class="text-danger">{{ form.ma_can_cuoc.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Số điện thoại</label>
            {{ form.so_dien_thoai|add_class:"form-control" }}
            {% if form.so_dien_thoai.errors %}
                <div class="text-danger">{{ form.so_dien_thoai.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Trạng thái</label>
            {{ form.trang_thai|add_class:"form-select" }}
            {% if form.trang_thai.errors %}
                <div class="text-danger">{{ form.trang_thai.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Thời gian chuyển đến</label>
            {{ form.thoi_gian_chuyen_den|add_class:"form-control" }}
            {% if form.thoi_gian_chuyen_den.errors %}
                <div class="text-danger">{{ form.thoi_gian_chuyen_den.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <label class="form-label">Thời gian chuyển đi</label>
            {{ form.thoi_gian_chuyen_di|add_class:"form-control" }}
            {% if form.thoi_gian_chuyen_di.errors %}
                <div class="text-danger">{{ form.thoi_gian_chuyen_di.errors.0 }}</div>
            {% endif %}
        </div>


        <div class="col-12 mt-3">
            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
            <a href="{{ next|default:default_url }}" class="btn btn-secondary">Quay lại</a>
            <a href="{% url 'tam_tru_tam_vang' dan_cu.id %}" class="btn btn-outline-info">Cập nhật tạm trú tạm vắng</a>
        </div>

    </form>
</div>
{% if messages %}
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 9999;">
    {% for message in messages %}
      <div class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
          <div class="toast-body">
            {{ message }}
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
      </div>
    {% endfor %}
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var toastElList = [].slice.call(document.querySelectorAll('.toast'))
      toastElList.forEach(function (toastEl) {
        new bootstrap.Toast(toastEl, { delay: 3000 }).show()
      });
    });
  </script>
{% endif %}
{% endblock %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
